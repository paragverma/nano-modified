<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>diff</title>
<meta name="Generator" content="Vim/7.4">
<meta name="plugin-version" content="vim7.4_v1">
<meta name="settings" content="whole_filler,use_css,no_foldcolumn,prevent_copy=">
<meta name="colorscheme" content="none">
<style type="text/css">
<!--
pre { font-family: monospace; color: #000000; background-color: #ffffff; }
body { font-family: monospace; color: #000000; background-color: #ffffff; }
* { font-size: 1em; }
.Comment { color: #8080ff; }
.Constant { color: #ff6060; }
.Special { color: #ff40ff; }
.Folded { color: #8080ff; background-color: #ffffff; padding-bottom: 1px; }
.Statement { color: #ffff00; }
.PreProc { color: #ff40ff; }
.Type { color: #00ff00; }
.DiffAdd { background-color: #8080ff; padding-bottom: 1px; }
.DiffChange { background-color: #ff40ff; padding-bottom: 1px; }
.DiffDelete { color: #8080ff; background-color: #00ffff; padding-bottom: 1px; font-weight: bold; }
.DiffText { background-color: #ff6060; padding-bottom: 1px; font-weight: bold; }
-->
<!--
table { table-layout: fixed; }
html, body, table, tbody { width: 100%; margin: 0; padding: 0; }
th, td { width: 50.0%; }
td div { overflow: auto; }
-->
</style>
<script type='text/javascript'>
<!--

/* function to open any folds containing a jumped-to line before jumping to it */
function JumpToLine()
{
  var lineNum;
  lineNum = window.location.hash;
  lineNum = lineNum.substr(1); /* strip off '#' */

  if (lineNum.indexOf('L') == -1) {
    lineNum = 'L'+lineNum;
  }
  if (lineNum.indexOf('W') == -1) {
    lineNum = 'W1'+lineNum;
  }
  lineElem = document.getElementById(lineNum);
  /* Always jump to new location even if the line was hidden inside a fold, or
   * we corrected the raw number to a line ID.
   */
  if (lineElem) {
    lineElem.scrollIntoView(true);
  }
  return true;
}
if ('onhashchange' in window) {
  window.onhashchange = JumpToLine;
}

-->
</script>
</head>
<body>
<table border='1' width='100%' id='vimCodeElement'>
<tr>
<th>prompt.c</th>
<th>promp_origt.c</th>
</tr><tr>
<td valign="top"><div>
<pre>
<span class="Folded">+-- 16 lines: $Id: prompt.c 5249 2015-06-14 19:14:41Z bens $ -----------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="Comment"> *   You should have received a copy of the GNU General Public License    *</span>
<span class="Comment"> *   along with this program; if not, write to the Free Software          *</span>
<span class="Comment"> *   Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA            *</span>
<span class="Comment"> *   02110-1301, USA.                                                     *</span>
<span class="Comment"> *                                                                        *</span>
<span class="Comment"> *************************************************************************</span><span class="Comment">*/</span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">/*</span><span class="DiffAdd">                                                                                                                                                                                                          </span>
<span class="Comment DiffAdd">Revision          15/11/2015        Revised by: Parag Verma</span><span class="DiffAdd">                                                                                                                                                 </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">Added code for prompt used in word completion.</span><span class="DiffAdd">                                                                                                                                                              </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                                                          </span>

<span class="PreProc">#include </span><span class="Constant">&quot;proto.h&quot;</span>

<span class="PreProc">#include </span><span class="Constant">&lt;stdio.h&gt;</span>
<span class="PreProc">#include </span><span class="Constant">&lt;stdarg.h&gt;</span>
<span class="PreProc">#include </span><span class="Constant">&lt;string.h&gt;</span>
<span class="Folded">+--1139 lines: static char *prompt = NULL;------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
		    ok = <span class="Constant">1</span>;
		<span class="Statement">else</span> <span class="Statement">if</span> (strchr(nostr, kbinput) != <span class="Constant">NULL</span>)
		    ok = <span class="Constant">0</span>;
		<span class="Statement">else</span> <span class="Statement">if</span> (all &amp;&amp; strchr(allstr, kbinput) != <span class="Constant">NULL</span>)
		    ok = <span class="Constant">2</span>;
	}
<span class="DiffAdd">    } </span><span class="Statement DiffAdd">while</span><span class="DiffAdd"> (ok == -</span><span class="Constant DiffAdd">2</span><span class="DiffAdd">);                                                                                                                                                                                     </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">    currmenu = oldmenu;</span><span class="DiffAdd">                                                                                                                                                                                     </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> ok;                                                                                                                                                                                              </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Modified clone of yes/no prompt for dictionary</span><span class="DiffAdd">                                                                                                                                                            </span>
<span class="Comment DiffAdd">  Tree received should be initialized.</span><span class="DiffAdd">                                                                                                                                                                      </span>
<span class="Comment DiffAdd"> * </span><span class="DiffAdd">                                                                                                                                                                                                         </span>
<span class="Comment DiffAdd"> </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                                                         </span>
<span class="Type DiffAdd">int</span><span class="DiffAdd"> do_dictionary_prompt(</span><span class="Type DiffAdd">bool</span><span class="DiffAdd"> all, </span><span class="Type DiffAdd">const</span><span class="DiffAdd"> </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *msg, tree tr, </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *str)                                                                                                                                     </span>
<span class="DiffAdd">{</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">    s_list l;</span><span class="DiffAdd">                                                                                                                                                                                               </span>
<span class="DiffAdd">    s_node *p;</span><span class="DiffAdd">                                                                                                                                                                                              </span>
<span class="DiffAdd">    tree grab;</span><span class="DiffAdd">                                                                                                                                                                                              </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> ok = -</span><span class="Constant DiffAdd">2</span><span class="DiffAdd">, width = </span><span class="Constant DiffAdd">16</span><span class="DiffAdd">;                                                                                                                                                                                </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">const</span><span class="DiffAdd"> </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *yesstr;		</span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> String of Yes characters accepted. </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                    </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">const</span><span class="DiffAdd"> </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *nostr;		</span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> Same for No. </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                          </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">const</span><span class="DiffAdd"> </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *allstr;		</span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> And All, surprise! </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                    </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> oldmenu = currmenu;                                                                                                                                                                                 </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> but[</span><span class="Constant DiffAdd">16</span><span class="DiffAdd">];                                                                                                                                                                                           </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> i, j = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                           </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> count = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                          </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> t = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                              </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> bs = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                             </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *buf;                                                                                                                                                                                              </span>
<span class="DiffAdd">    buf = str;</span><span class="DiffAdd">                                                                                                                                                                                              </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> tp;                                                                                                                                                                                                 </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> we = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">, wc = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                     </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    tp = typepos();</span><span class="DiffAdd">                                                                                                                                                                                         </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    assert(msg != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">);                                                                                                                                                                                    </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    s_init(&amp;l);</span><span class="DiffAdd">                                                                                                                                                                                             </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">while</span><span class="DiffAdd">((grab = search(tr, str, &amp;l)) != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">){                                                                                                                                                            </span>
<span class="DiffAdd">        s_append(&amp;l, grab-&gt;str);</span><span class="DiffAdd">                                                                                                                                                                            </span>
<span class="DiffAdd">        count++;</span><span class="DiffAdd">                                                                                                                                                                                            </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd">    </span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Now partial matched list is prepared</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                </span>
<span class="DiffAdd">           p = l.head;</span><span class="DiffAdd">                                                                                                                                                                                      </span>
<span class="DiffAdd">           </span><span class="DiffAdd">                                                                                                                                                                                                 </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(str == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">){                                                                                                                                                                                        </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">        count = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                          </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(p){                                                                                                                                                                                           </span>
<span class="DiffAdd">            count++;</span><span class="DiffAdd">                                                                                                                                                                                        </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">            p = p-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">            p = p-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">        }</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">    p = l.head;</span><span class="DiffAdd">                                                                                                                                                                                             </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">do</span><span class="DiffAdd"> {                                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> kbinput;                                                                                                                                                                                        </span>
<span class="DiffAdd">	functionptrtype func;</span><span class="DiffAdd">                                                                                                                                                                               </span>
<span class="DiffAdd">        i = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                              </span>
<span class="PreProc DiffAdd">#ifndef DISABLE_MOUSE</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> mouse_x, mouse_y;                                                                                                                                                                               </span>
<span class="PreProc DiffAdd">#endif</span><span class="DiffAdd">                                                                                                                                                                                                      </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd"> (!ISSET(NO_HELP)) {                                                                                                                                                                              </span>
<span class="DiffAdd">	    </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> shortstr[</span><span class="Constant DiffAdd">3</span><span class="DiffAdd">];                                                                                                                                                                               </span>
<span class="DiffAdd">		</span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> Temporary string for (translated) &quot; Y&quot;, &quot; N&quot; and &quot; A&quot;. </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	    </span><span class="Statement DiffAdd">if</span><span class="DiffAdd"> (COLS &lt; </span><span class="Constant DiffAdd">32</span><span class="DiffAdd">)                                                                                                                                                                                  </span>
<span class="DiffAdd">		width = COLS / </span><span class="Constant DiffAdd">2</span><span class="DiffAdd">;                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	    </span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> Clear the shortcut list from the bottom of the screen. </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                    </span>
<span class="DiffAdd">	    blank_bottombars();</span><span class="DiffAdd">                                                                                                                                                                             </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	    </span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> Now show the ones for &quot;Yes&quot;, &quot;No&quot;, &quot;Cancel&quot; and maybe &quot;All&quot;. </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                              </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	    </span><span class="Statement DiffAdd">if</span><span class="DiffAdd"> (all) {                                                                                                                                                                                      </span>
<span class="DiffAdd">		shortstr[</span><span class="Constant DiffAdd">1</span><span class="DiffAdd">] = allstr[</span><span class="Constant DiffAdd">0</span><span class="DiffAdd">];                                                                                                                                                                    </span>
<span class="DiffAdd">		wmove(bottomwin, </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">, width);                                                                                                                                                                 </span>
<span class="DiffAdd">		onekey(shortstr, _(</span><span class="Constant DiffAdd">&quot;All&quot;</span><span class="DiffAdd">), width);                                                                                                                                                          </span>
<span class="DiffAdd">	    }</span><span class="DiffAdd">                                                                                                                                                                                               </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(i = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; i &lt; count &amp;&amp; i &lt; </span><span class="Constant DiffAdd">5</span><span class="DiffAdd">; i++){                                                                                                                                                            </span>
<span class="DiffAdd">                sprintf(but, </span><span class="Constant DiffAdd">&quot;</span><span class="Special DiffAdd">%d</span><span class="Constant DiffAdd">&quot;</span><span class="DiffAdd">, i + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">);                                                                                                                                                                  </span>
<span class="DiffAdd">                </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(i == </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">) wmove(bottomwin, </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">, </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">);                                                                                                                                                          </span>
<span class="DiffAdd">                </span><span class="Statement DiffAdd">else</span><span class="DiffAdd"> wmove(bottomwin, </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">, i * width);                                                                                                                                                        </span>
<span class="DiffAdd">                </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(p){                                                                                                                                                                                      </span>
<span class="DiffAdd">                    onekey(but, p-&gt;word, width);</span><span class="DiffAdd">                                                                                                                                                            </span>
<span class="DiffAdd">                    p = p-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                            </span>
<span class="DiffAdd">                    p = p-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                            </span>
<span class="DiffAdd">                }</span><span class="DiffAdd">                                                                                                                                                                                           </span>
<span class="DiffAdd">                j++;</span><span class="DiffAdd">                                                                                                                                                                                        </span>
<span class="DiffAdd">            }</span><span class="DiffAdd">                                                                                                                                                                                               </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	    wmove(bottomwin, </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">, i * width);                                                                                                                                                                 </span>
<span class="DiffAdd">	    onekey(</span><span class="Constant DiffAdd">&quot;^C&quot;</span><span class="DiffAdd">, _(</span><span class="Constant DiffAdd">&quot;Cancel&quot;</span><span class="DiffAdd">), width);                                                                                                                                                               </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd"> (interface_color_pair[TITLE_BAR].bright)                                                                                                                                                         </span>
<span class="DiffAdd">	    wattron(bottomwin, A_BOLD);</span><span class="DiffAdd">                                                                                                                                                                     </span>
<span class="DiffAdd">	wattron(bottomwin, interface_color_pair[TITLE_BAR].pairnum);</span><span class="DiffAdd">                                                                                                                                        </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	blank_statusbar();</span><span class="DiffAdd">                                                                                                                                                                                  </span>
<span class="DiffAdd">	mvwaddnstr(bottomwin, </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">, </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">, msg, actual_x(msg, COLS - </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">));                                                                                                                                          </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	wattroff(bottomwin, A_BOLD);</span><span class="DiffAdd">                                                                                                                                                                        </span>
<span class="DiffAdd">	wattroff(bottomwin, interface_color_pair[TITLE_BAR].pairnum);</span><span class="DiffAdd">                                                                                                                                       </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> Refresh edit window and statusbar before getting input. </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                       </span>
<span class="DiffAdd">	wnoutrefresh(edit);</span><span class="DiffAdd">                                                                                                                                                                                 </span>
<span class="DiffAdd">	wnoutrefresh(bottomwin);</span><span class="DiffAdd">                                                                                                                                                                            </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	currmenu = MYESNO;</span><span class="DiffAdd">                                                                                                                                                                                  </span>
<span class="DiffAdd">	kbinput = get_kbinput(bottomwin);</span><span class="DiffAdd">                                                                                                                                                                   </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="PreProc DiffAdd">#ifndef NANO_TINY</span><span class="DiffAdd">                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd"> (kbinput == KEY_WINCH)                                                                                                                                                                           </span>
<span class="DiffAdd">	    </span><span class="Statement DiffAdd">continue</span><span class="DiffAdd">;                                                                                                                                                                                       </span>
<span class="PreProc DiffAdd">#endif</span><span class="DiffAdd">                                                                                                                                                                                                      </span>
<span class="DiffAdd">        </span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">49 is 1, 50 is 2 and so on</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                      </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	func = func_from_key(&amp;kbinput);</span><span class="DiffAdd">                                                                                                                                                                     </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd"> (func == do_cancel){                                                                                                                                                                             </span>
<span class="DiffAdd">	    ok = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                         </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> ok;                                                                                                                                                                                      </span>
<span class="DiffAdd">        }</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">  </span><span class="DiffAdd">                                                                                                                                                                                                          </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(kbinput == </span><span class="Constant DiffAdd">'s'</span><span class="DiffAdd">){                                                                                                                                                                                 </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(i == </span><span class="Constant DiffAdd">5</span><span class="DiffAdd">) {                                                                                                                                                                                    </span>
<span class="DiffAdd">                </span><span class="Statement DiffAdd">continue</span><span class="DiffAdd">;                                                                                                                                                                                   </span>
<span class="DiffAdd">            }</span><span class="DiffAdd">                                                                                                                                                                                               </span>
<span class="DiffAdd">        }</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(kbinput &lt;= </span><span class="Constant DiffAdd">'0'</span><span class="DiffAdd"> || kbinput &gt; </span><span class="Constant DiffAdd">'0'</span><span class="DiffAdd"> + count) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> -</span><span class="Constant DiffAdd">1</span><span class="DiffAdd">;                                                                                                                                              </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(kbinput &gt; </span><span class="Constant DiffAdd">'0'</span><span class="DiffAdd"> &amp;&amp; kbinput &lt;= </span><span class="Constant DiffAdd">'0'</span><span class="DiffAdd"> + count){                                                                                                                                                        </span>
<span class="DiffAdd">            p = l.head;</span><span class="DiffAdd">                                                                                                                                                                                     </span>
<span class="DiffAdd">            i = kbinput - </span><span class="Constant DiffAdd">'0'</span><span class="DiffAdd"> - </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">;                                                                                                                                                                          </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(j &gt; </span><span class="Constant DiffAdd">5</span><span class="DiffAdd">) t = j - </span><span class="Constant DiffAdd">5</span><span class="DiffAdd"> + i;                                                                                                                                                                        </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">else</span><span class="DiffAdd"> t = i;                                                                                                                                                                                     </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(t--) </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(p){                                                                                                                                                                               </span>
<span class="DiffAdd">                        p = p-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                        </span>
<span class="DiffAdd">                        p = p-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                        </span>
<span class="DiffAdd">                        }</span><span class="DiffAdd">                                                                                                                                                                                   </span>
<span class="DiffAdd">            </span><span class="DiffAdd">                                                                                                                                                                                                </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(tp == </span><span class="Constant DiffAdd">1</span><span class="DiffAdd"> || tp == </span><span class="Constant DiffAdd">2</span><span class="DiffAdd">){                                                                                                                                                                         </span>
<span class="DiffAdd">                bs = strlen(str);</span><span class="DiffAdd">                                                                                                                                                                           </span>
<span class="DiffAdd">                </span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(bs--) do_backspace();                                                                                                                                                                 </span>
<span class="DiffAdd">            }</span><span class="DiffAdd">                                                                                                                                                                                               </span>
<span class="DiffAdd">            </span><span class="DiffAdd">                                                                                                                                                                                                </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(tp == </span><span class="Constant DiffAdd">6</span><span class="DiffAdd"> || tp == </span><span class="Constant DiffAdd">7</span><span class="DiffAdd">){                                                                                                                                                                         </span>
<span class="DiffAdd">                </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(str != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">){                                                                                                                                                                            </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">                    we = openfile-&gt;current_x;</span><span class="DiffAdd">                                                                                                                                                               </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">                    </span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(openfile-&gt;current-&gt;data[we] != </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd"> &amp;&amp; openfile-&gt;current-&gt;data[we] != </span><span class="Special DiffAdd">'\00'</span><span class="DiffAdd">){                                                                                                      </span>
<span class="DiffAdd">                     we++;</span><span class="DiffAdd">                                                                                                                                                                                  </span>
<span class="DiffAdd">                        wc++;</span><span class="DiffAdd">                                                                                                                                                                               </span>
<span class="DiffAdd">                        do_right();</span><span class="DiffAdd">                                                                                                                                                                         </span>
<span class="DiffAdd">                    }</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">                    we--;</span><span class="DiffAdd">                                                                                                                                                                                   </span>
<span class="DiffAdd">                    </span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(openfile-&gt;current-&gt;data[we] != </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd"> &amp;&amp; openfile-&gt;current-&gt;data[we] != </span><span class="Special DiffAdd">'\00'</span><span class="DiffAdd">){                                                                                                      </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">                        do_backspace();</span><span class="DiffAdd">                                                                                                                                                                     </span>
<span class="DiffAdd">                        we--;</span><span class="DiffAdd">                                                                                                                                                                               </span>
<span class="DiffAdd">                    }</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd">                }</span><span class="DiffAdd">                                                                                                                                                                                           </span>
<span class="DiffAdd">            }</span><span class="DiffAdd">                                                                                                                                                                                               </span>
<span class="DiffAdd">            </span><span class="DiffAdd">                                                                                                                                                                                                </span>
<span class="DiffAdd">            </span><span class="DiffAdd">                                                                                                                                                                                                </span>
<span class="DiffAdd">            do_output(p-&gt;word, strlen(p-&gt;word), FALSE);</span><span class="DiffAdd">                                                                                                                                                     </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> tp;                                                                                                                                                                                      </span>
<span class="DiffAdd">        }</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">else</span><span class="DiffAdd"> </span><span class="Statement DiffAdd">if</span><span class="DiffAdd"> (func == total_refresh) {                                                                                                                                                                   </span>
<span class="DiffAdd">	    total_redraw();</span><span class="DiffAdd">                                                                                                                                                                                 </span>
<span class="DiffAdd">	    </span><span class="Statement DiffAdd">continue</span><span class="DiffAdd">;                                                                                                                                                                                       </span>
<span class="DiffAdd">	} </span><span class="Statement DiffAdd">else</span><span class="DiffAdd"> {                                                                                                                                                                                            </span>
<span class="DiffAdd">		</span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> Look for the kbinput in the Yes, No and (optionally)</span><span class="DiffAdd">                                                                                                                                     </span>
<span class="Comment DiffAdd">		 * All strings. </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                          </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">if</span><span class="DiffAdd"> (strchr(yesstr, kbinput) != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">)                                                                                                                                                        </span>
<span class="DiffAdd">		    ok = </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">;                                                                                                                                                                                 </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">else</span><span class="DiffAdd"> </span><span class="Statement DiffAdd">if</span><span class="DiffAdd"> (strchr(nostr, kbinput) != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">)                                                                                                                                                    </span>
<span class="DiffAdd">		    ok = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                 </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">else</span><span class="DiffAdd"> </span><span class="Statement DiffAdd">if</span><span class="DiffAdd"> (all &amp;&amp; strchr(allstr, kbinput) != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">)                                                                                                                                            </span>
<span class="DiffAdd">		    ok = </span><span class="Constant DiffAdd">2</span><span class="DiffAdd">;                                                                                                                                                                                 </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">        i = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                              </span>
<span class="DiffAdd">        p = l.head;</span><span class="DiffAdd">                                                                                                                                                                                         </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
    } <span class="Statement">while</span> (ok == -<span class="Constant">2</span>);

    currmenu = oldmenu;
    <span class="Statement">return</span> ok;
}
</pre>
</div></td>
<td valign="top"><div>
<pre>
<span class="Folded">+-- 16 lines: $Id: prompt.c 5249 2015-06-14 19:14:41Z bens $ -----------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="Comment"> *   You should have received a copy of the GNU General Public License    *</span>
<span class="Comment"> *   along with this program; if not, write to the Free Software          *</span>
<span class="Comment"> *   Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA            *</span>
<span class="Comment"> *   02110-1301, USA.                                                     *</span>
<span class="Comment"> *                                                                        *</span>
<span class="Comment"> *************************************************************************</span><span class="Comment">*/</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>

<span class="PreProc">#include </span><span class="Constant">&quot;proto.h&quot;</span>

<span class="PreProc">#include </span><span class="Constant">&lt;stdio.h&gt;</span>
<span class="PreProc">#include </span><span class="Constant">&lt;stdarg.h&gt;</span>
<span class="PreProc">#include </span><span class="Constant">&lt;string.h&gt;</span>
<span class="Folded">+--1139 lines: static char *prompt = NULL;------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
		    ok = <span class="Constant">1</span>;
		<span class="Statement">else</span> <span class="Statement">if</span> (strchr(nostr, kbinput) != <span class="Constant">NULL</span>)
		    ok = <span class="Constant">0</span>;
		<span class="Statement">else</span> <span class="Statement">if</span> (all &amp;&amp; strchr(allstr, kbinput) != <span class="Constant">NULL</span>)
		    ok = <span class="Constant">2</span>;
	}
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
    } <span class="Statement">while</span> (ok == -<span class="Constant">2</span>);

    currmenu = oldmenu;
    <span class="Statement">return</span> ok;
}
</pre>
</div></td>
</tr>
</table>
</body>
</html>
<!-- vim: set foldmethod=manual : -->

