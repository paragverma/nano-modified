<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>diff</title>
<meta name="Generator" content="Vim/7.4">
<meta name="plugin-version" content="vim7.4_v1">
<meta name="settings" content="whole_filler,use_css,no_foldcolumn,prevent_copy=">
<meta name="colorscheme" content="none">
<style type="text/css">
<!--
pre { font-family: monospace; color: #000000; background-color: #ffffff; }
body { font-family: monospace; color: #000000; background-color: #ffffff; }
* { font-size: 1em; }
.Comment { color: #8080ff; }
.Constant { color: #ff6060; }
.Special { color: #ff40ff; }
.Folded { color: #8080ff; background-color: #ffffff; padding-bottom: 1px; }
.Statement { color: #ffff00; }
.PreProc { color: #ff40ff; }
.Type { color: #00ff00; }
.DiffAdd { background-color: #8080ff; padding-bottom: 1px; }
.DiffChange { background-color: #ff40ff; padding-bottom: 1px; }
.DiffDelete { color: #8080ff; background-color: #00ffff; padding-bottom: 1px; font-weight: bold; }
.DiffText { background-color: #ff6060; padding-bottom: 1px; font-weight: bold; }
-->
<!--
table { table-layout: fixed; }
html, body, table, tbody { width: 100%; margin: 0; padding: 0; }
th, td { width: 50.0%; }
td div { overflow: auto; }
-->
</style>
<script type='text/javascript'>
<!--

/* function to open any folds containing a jumped-to line before jumping to it */
function JumpToLine()
{
  var lineNum;
  lineNum = window.location.hash;
  lineNum = lineNum.substr(1); /* strip off '#' */

  if (lineNum.indexOf('L') == -1) {
    lineNum = 'L'+lineNum;
  }
  if (lineNum.indexOf('W') == -1) {
    lineNum = 'W1'+lineNum;
  }
  lineElem = document.getElementById(lineNum);
  /* Always jump to new location even if the line was hidden inside a fold, or
   * we corrected the raw number to a line ID.
   */
  if (lineElem) {
    lineElem.scrollIntoView(true);
  }
  return true;
}
if ('onhashchange' in window) {
  window.onhashchange = JumpToLine;
}

-->
</script>
</head>
<body>
<table border='1' width='100%' id='vimCodeElement'>
<tr>
<th>nano.c</th>
<th>nano_modified.c</th>
</tr><tr>
<td valign="top"><div>
<pre>
<span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> $Id: nano.c 5265 2015-06-20 18:48:43Z bens $ </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                          </span>
<span class="Comment">/*</span><span class="Comment">*************************************************************************</span>
<span class="Comment"> *   nano.c                                                               *</span>
<span class="Comment"> *                                                                        *</span>
<span class="Comment"> *   Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007,  *</span>
<span class="Comment"> *   2008, 2009, 2010, 2011, 2013, 2014 Free Software Foundation, Inc.    *</span>
<span class="Comment"> *   This program is free software; you can redistribute it and/or modify *</span>
<span class="Folded">+--  9 lines: *   it under the terms of the GNU General Public License as published by *--------------------------------------------------------------------------------------------------------------------</span>
<span class="Comment"> *   You should have received a copy of the GNU General Public License    *</span>
<span class="Comment"> *   along with this program; if not, write to the Free Software          *</span>
<span class="Comment"> *   Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA            *</span>
<span class="Comment"> *   02110-1301, USA.                                                     *</span>
<span class="Comment"> *                                                                        *</span>
<span class="Comment"> *************************************************************************</span><span class="Comment">*/</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>

<span class="PreProc">#include </span><span class="Constant">&quot;proto.h&quot;</span>

<span class="PreProc">#include </span><span class="Constant">&lt;stdio.h&gt;</span>
<span class="PreProc">#include </span><span class="Constant">&lt;stdarg.h&gt;</span>
<span class="PreProc">#include </span><span class="Constant">&lt;unistd.h&gt;</span>
<span class="Folded">+--  9 lines: #include &lt;string.h&gt;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="PreProc">#include </span><span class="Constant">&lt;termios.h&gt;</span>
<span class="PreProc">#ifdef HAVE_GETOPT_H</span>
<span class="PreProc">#include </span><span class="Constant">&lt;getopt.h&gt;</span>
<span class="PreProc">#endif</span>
<span class="PreProc">#ifndef NANO_TINY</span>
<span class="PreProc">#include </span><span class="Constant">&lt;sys/ioctl.h&gt;</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="PreProc">#endif</span>

<span class="PreProc">#ifndef DISABLE_MOUSE</span>
<span class="Type">static</span> <span class="Type">int</span> oldinterval = -<span class="Constant">1</span>;
	<span class="Comment">/*</span><span class="Comment"> Used to store the user's original mouse click interval. </span><span class="Comment">*/</span>
<span class="PreProc">#endif</span>
<span class="Folded">+--  3 lines: #ifndef DISABLE_NANORC------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="PreProc">#endif</span>
<span class="Type">static</span> <span class="Type">struct</span> termios oldterm;
	<span class="Comment">/*</span><span class="Comment"> The user's original terminal settings. </span><span class="Comment">*/</span>
<span class="Type">static</span> <span class="Type">struct</span> sigaction act;
	<span class="Comment">/*</span><span class="Comment"> Used to set up all our fun signal handlers. </span><span class="Comment">*/</span>

<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="Comment">/*</span><span class="Comment"> Create a new linestruct node.  Note that we do not set prevnode-&gt;next</span>
<span class="Comment"> * to the new line. </span><span class="Comment">*/</span>
linestruct *make_new_node(linestruct *prevnode)
{
    linestruct *newnode = (linestruct *)nmalloc(<span class="Statement">sizeof</span>(linestruct));

<span class="Folded">+--1503 lines: newnode-&gt;data = NULL;------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
}

<span class="Comment">/*</span><span class="Comment"> Read in a character, interpret it as a shortcut or toggle if</span>
<span class="Comment"> * necessary, and return it.</span>
<span class="Comment"> * If allow_funcs is FALSE, don't actually run any functions associated</span>
<span class="Comment"> * with shortcut keys. </span><span class="Comment">*/</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="Type">int</span> do_input(<span class="Type">bool</span> allow_funcs)
{
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
    <span class="Type">int</span> input;
	<span class="Comment">/*</span><span class="Comment"> The character we read in. </span><span class="Comment">*/</span>
    <span class="Type">static</span> <span class="Type">int</span> *kbinput = <span class="Constant">NULL</span>;
	<span class="Comment">/*</span><span class="Comment"> The input buffer. </span><span class="Comment">*/</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
    <span class="Type">static</span> <span class="Type">size_t</span> kbinput_len = <span class="Constant">0</span>;
	<span class="Comment">/*</span><span class="Comment"> The length of the input buffer. </span><span class="Comment">*/</span>
    <span class="Type">bool</span> preserve = FALSE;
	<span class="Comment">/*</span><span class="Comment"> Preserve the contents of the cutbuffer? </span><span class="Comment">*/</span>
    <span class="Type">const</span> sc *s;
    <span class="Type">bool</span> have_shortcut;
    <span class="Comment">/*</span><span class="Comment"> Read in a character. </span><span class="Comment">*/</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
    input = get_kbinput(edit);

<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="PreProc">#ifndef NANO_TINY</span>
    <span class="Statement">if</span> (input == KEY_WINCH)
	<span class="Statement">return</span> KEY_WINCH;
<span class="PreProc">#endif</span>

<span class="PreProc">#ifndef DISABLE_MOUSE</span>
<span class="Folded">+--  9 lines: if (func_key &amp;&amp; input == KEY_MOUSE) {---------------------------------------------------------------------------------------------------------------------------------------------------------</span>
    }
<span class="PreProc">#endif</span>

    <span class="Comment">/*</span><span class="Comment"> Check for a shortcut in the main list. </span><span class="Comment">*/</span>
    s = get_shortcut(&amp;input);

<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
    <span class="Comment">/*</span><span class="Comment"> If we got a shortcut from the main list, or a &quot;universal&quot;</span>
<span class="Comment">     * edit window shortcut, set have_shortcut to TRUE. </span><span class="Comment">*/</span>
    have_shortcut = (s != <span class="Constant">NULL</span>);

<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
    <span class="Comment">/*</span><span class="Comment"> If we got a non-high-bit control key, a meta key sequence, or a</span>
<span class="Comment">     * function key, and it's not a shortcut or toggle, throw it out. </span><span class="Comment">*/</span>
    <span class="Statement">if</span> (!have_shortcut) {
	<span class="Statement">if</span> (is_ascii_cntrl_char(input) || meta_key || func_key) {
	    statusbar(_(<span class="Constant">&quot;Unknown Command&quot;</span>));
	    beep();
<span class="Folded">+-- 44 lines: meta_key = FALSE;-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
		<span class="Type">char</span> *output = charalloc(kbinput_len + <span class="Constant">1</span>);
		<span class="Type">size_t</span> i;

		<span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; kbinput_len; i++)
		    output[i] = (<span class="Type">char</span>)kbinput[i];
		output[i] = <span class="Special">'\0'</span>;
<span class="DiffChange"> </span><span class="DiffChange">                                                                                                                                                                                                           </span>
<span class="DiffText">		do_output(output, kbinput_len, FALSE);</span><span class="DiffChange">                                                                                                                                                      </span>
<span class="DiffChange"> </span><span class="DiffChange">                                                                                                                                                                                                           </span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
		free(output);

		<span class="Comment">/*</span><span class="Comment"> Empty the input buffer. </span><span class="Comment">*/</span>
		kbinput_len = <span class="Constant">0</span>;
		free(kbinput);
		kbinput = <span class="Constant">NULL</span>;
<span class="Folded">+--295 lines: }---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="Type">void</span> do_output(<span class="Type">char</span> *output, <span class="Type">size_t</span> output_len, <span class="Type">bool</span> allow_cntrls)
{
    <span class="Type">size_t</span> current_len, i = <span class="Constant">0</span>;
<span class="PreProc">#ifndef NANO_TINY</span>
    <span class="Type">size_t</span> orig_lenpt = <span class="Constant">0</span>;
<span class="PreProc">#endif</span>
<span class="DiffChange"> </span><span class="DiffChange">                                                                                                                                                                                                           </span>
    <span class="Type">char</span> *char_buf = charalloc(mb_cur_max());
    <span class="Type">int</span> char_buf_len;

    assert(openfile-&gt;current != <span class="Constant">NULL</span> &amp;&amp; openfile-&gt;current-&gt;data != <span class="Constant">NULL</span>);

    current_len = strlen(openfile-&gt;current-&gt;data);
<span class="Folded">+-- 60 lines: #ifndef NANO_TINY-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
		openfile-&gt;mark_begin_x)
	    openfile-&gt;mark_begin_x += char_buf_len;
<span class="PreProc">#endif</span>

	openfile-&gt;current_x += char_buf_len;

<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="PreProc">#ifndef NANO_TINY</span>
	update_undo(ADD);
<span class="PreProc">#endif</span>

<span class="PreProc">#ifndef DISABLE_WRAPPING</span>
	<span class="Comment">/*</span><span class="Comment"> If we're wrapping text, we need to call edit_refresh(). </span><span class="Comment">*/</span>
<span class="Folded">+-- 29 lines: if (!ISSET(NO_WRAP))--------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
	edit_refresh();
	edit_refresh_needed = FALSE;
    } <span class="Statement">else</span>
	update_line(openfile-&gt;current, openfile-&gt;current_x);
}

<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="Type">int</span> main(<span class="Type">int</span> argc, <span class="Type">char</span> **argv)
{
    <span class="Type">int</span> optchr;
    <span class="Type">ssize_t</span> startline = <span class="Constant">0</span>, startcol = <span class="Constant">0</span>;
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
	<span class="Comment">/*</span><span class="Comment"> Target line and column when specified on the command line. </span><span class="Comment">*/</span>
<span class="PreProc">#ifndef DISABLE_WRAPJUSTIFY</span>
    <span class="Type">bool</span> fill_used = FALSE;
	<span class="Comment">/*</span><span class="Comment"> Was the fill option used? </span><span class="Comment">*/</span>
<span class="PreProc">#endif</span>
    SET(USE_MOUSE);
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="PreProc">#ifndef DISABLE_MULTIBUFFER</span>
    <span class="Type">bool</span> old_multibuffer;
	<span class="Comment">/*</span><span class="Comment"> The old value of the multibuffer option, restored after we</span>
<span class="Comment">	 * load all files on the command line. </span><span class="Comment">*/</span>
<span class="PreProc">#endif</span>
<span class="PreProc">#ifdef HAVE_GETOPT_LONG</span>
<span class="Folded">+--707 lines: const struct option long_options[] = {--------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</pre>
</div></td>
<td valign="top"><div>
<pre>
<span class="DiffDelete">------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="Comment">/*</span><span class="Comment">*************************************************************************</span>
<span class="Comment"> *   nano.c                                                               *</span>
<span class="Comment"> *                                                                        *</span>
<span class="Comment"> *   Copyright (C) 1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007,  *</span>
<span class="Comment"> *   2008, 2009, 2010, 2011, 2013, 2014 Free Software Foundation, Inc.    *</span>
<span class="Comment"> *   This program is free software; you can redistribute it and/or modify *</span>
<span class="Folded">+--  9 lines: *   it under the terms of the GNU General Public License as published by *--------------------------------------------------------------------------------------------------------------------</span>
<span class="Comment"> *   You should have received a copy of the GNU General Public License    *</span>
<span class="Comment"> *   along with this program; if not, write to the Free Software          *</span>
<span class="Comment"> *   Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA            *</span>
<span class="Comment"> *   02110-1301, USA.                                                     *</span>
<span class="Comment"> *                                                                        *</span>
<span class="Comment"> *************************************************************************</span><span class="Comment">*/</span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">/*</span><span class="DiffAdd">                                                                                                                                                                                                          </span>
<span class="Comment DiffAdd">Revision          15/11/2015        Revised by: Parag Verma</span><span class="DiffAdd">                                                                                                                                                 </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">Added code and functions for printing text to multiple locations,</span><span class="DiffAdd">                                                                                                                                           </span>
<span class="Comment DiffAdd">basic word completion.</span><span class="DiffAdd">                                                                                                                                                                                      </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">Modified input function to implement the features.</span><span class="DiffAdd">                                                                                                                                                          </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                                                          </span>

<span class="PreProc">#include </span><span class="Constant">&quot;proto.h&quot;</span>

<span class="PreProc">#include </span><span class="Constant">&lt;stdio.h&gt;</span>
<span class="PreProc">#include </span><span class="Constant">&lt;stdarg.h&gt;</span>
<span class="PreProc">#include </span><span class="Constant">&lt;unistd.h&gt;</span>
<span class="Folded">+--  9 lines: #include &lt;string.h&gt;---------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="PreProc">#include </span><span class="Constant">&lt;termios.h&gt;</span>
<span class="PreProc">#ifdef HAVE_GETOPT_H</span>
<span class="PreProc">#include </span><span class="Constant">&lt;getopt.h&gt;</span>
<span class="PreProc">#endif</span>
<span class="PreProc">#ifndef NANO_TINY</span>
<span class="PreProc">#include </span><span class="Constant">&lt;sys/ioctl.h&gt;</span>
<span class="PreProc DiffAdd">#include </span><span class="Constant DiffAdd">&lt;curses.h&gt;</span><span class="DiffAdd">                                                                                                                                                                                         </span>
<span class="PreProc">#endif</span>

<span class="PreProc">#ifndef DISABLE_MOUSE</span>
<span class="Type">static</span> <span class="Type">int</span> oldinterval = -<span class="Constant">1</span>;
	<span class="Comment">/*</span><span class="Comment"> Used to store the user's original mouse click interval. </span><span class="Comment">*/</span>
<span class="PreProc">#endif</span>
<span class="Folded">+--  3 lines: #ifndef DISABLE_NANORC------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="PreProc">#endif</span>
<span class="Type">static</span> <span class="Type">struct</span> termios oldterm;
	<span class="Comment">/*</span><span class="Comment"> The user's original terminal settings. </span><span class="Comment">*/</span>
<span class="Type">static</span> <span class="Type">struct</span> sigaction act;
	<span class="Comment">/*</span><span class="Comment"> Used to set up all our fun signal handlers. </span><span class="Comment">*/</span>

<span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Multiple cursors</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                                        </span>
<span class="Type DiffAdd">int</span><span class="DiffAdd"> mcflag = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                             </span>
<span class="Type DiffAdd">typedef</span><span class="DiffAdd"> </span><span class="Type DiffAdd">struct</span><span class="DiffAdd"> mcpositions{                                                                                                                                                                                 </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">size_t</span><span class="DiffAdd"> xcor;                                                                                                                                                                                        </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">ssize_t</span><span class="DiffAdd"> ycor;                                                                                                                                                                                       </span>
<span class="DiffAdd">        </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> x_shift;                                                                                                                                                                                        </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">struct</span><span class="DiffAdd"> mcpositions *next;                                                                                                                                                                           </span>
<span class="DiffAdd">} mcpositions;</span><span class="DiffAdd">                                                                                                                                                                                              </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">typedef</span><span class="DiffAdd"> </span><span class="Type DiffAdd">struct</span><span class="DiffAdd"> mcarray{                                                                                                                                                                                     </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">struct</span><span class="DiffAdd"> mcpositions *head;                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">struct</span><span class="DiffAdd"> mcpositions *tail;                                                                                                                                                                           </span>
<span class="DiffAdd">} mcarray;</span><span class="DiffAdd">                                                                                                                                                                                                  </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> initmcarray(mcarray *p){                                                                                                                                                                               </span>
<span class="DiffAdd">	p-&gt;head = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                                     </span>
<span class="DiffAdd">	p-&gt;tail = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                                     </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">int</span><span class="DiffAdd"> distance_origin(mcpositions *a){                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> a-&gt;xcor + a-&gt;ycor;                                                                                                                                                                               </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">int</span><span class="DiffAdd"> mc_empty(mcarray *p){                                                                                                                                                                                   </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> (p-&gt;head == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd"> ) &amp;&amp; (p-&gt;tail == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">);                                                                                                                                                         </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> decrement_xcor_f_sl(mcarray *p, </span><span class="Type DiffAdd">ssize_t</span><span class="DiffAdd"> yco, </span><span class="Type DiffAdd">size_t</span><span class="DiffAdd"> xco){                                                                                                                                              </span>
<span class="DiffAdd">    mcpositions *q = p-&gt;head;</span><span class="DiffAdd">                                                                                                                                                                               </span>
<span class="DiffAdd">     </span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(q != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">){                                                                                                                                                                                      </span>
<span class="DiffAdd">         </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(q-&gt;ycor == yco)                                                                                                                                                                                 </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(q-&gt;xcor &gt; xco + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">) q-&gt;xcor--;                                                                                                                                                                </span>
<span class="DiffAdd">        q = q-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                                        </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                                                 </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> backspace_mc(mcarray *p){                                                                                                                                                                              </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">size_t</span><span class="DiffAdd"> x;                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">ssize_t</span><span class="DiffAdd"> y;                                                                                                                                                                                          </span>
<span class="DiffAdd">        </span><span class="Type DiffAdd">size_t</span><span class="DiffAdd"> x_orig = openfile-&gt;current_x;                                                                                                                                                                </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">ssize_t</span><span class="DiffAdd"> y_orig = openfile-&gt;current_y;                                                                                                                                                               </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> i, j;                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> le;                                                                                                                                                                                             </span>
<span class="DiffAdd">        </span><span class="Type DiffAdd">void</span><span class="DiffAdd"> *opts = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                                  </span>
<span class="DiffAdd">        </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> c_at_lastline = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                              </span>
<span class="DiffAdd">	mcpositions *q = p-&gt;head;</span><span class="DiffAdd">                                                                                                                                                                           </span>
<span class="DiffAdd">	linestruct *f = openfile-&gt;fileage;</span><span class="DiffAdd">                                                                                                                                                                  </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(q != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">){                                                                                                                                                                                   </span>
<span class="DiffAdd">            </span><span class="DiffAdd">                                                                                                                                                                                                </span>
<span class="DiffAdd">		do_first_line();</span><span class="DiffAdd">                                                                                                                                                                            </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">		x = q-&gt;xcor--;</span><span class="DiffAdd">                                                                                                                                                                              </span>
<span class="DiffAdd">                q-&gt;x_shift--;</span><span class="DiffAdd">                                                                                                                                                                               </span>
<span class="DiffAdd">		y = q-&gt;ycor;</span><span class="DiffAdd">                                                                                                                                                                                </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">                    </span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(j = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; j &lt; y; j++){                                                                                                                                                                 </span>
<span class="DiffAdd">                        do_down_void();</span><span class="DiffAdd">                                                                                                                                                                     </span>
<span class="DiffAdd">                    }</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd">                </span><span class="DiffAdd">                                                                                                                                                                                            </span>
<span class="DiffAdd">                    </span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(i = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; i &lt; x; i++){                                                                                                                                                                 </span>
<span class="DiffAdd">                        do_right();</span><span class="DiffAdd">                                                                                                                                                                         </span>
<span class="DiffAdd">                    }</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd">                </span><span class="DiffAdd">                                                                                                                                                                                            </span>
<span class="DiffAdd">                decrement_xcor_f_sl(p, y, x);</span><span class="DiffAdd">                                                                                                                                                               </span>
<span class="DiffAdd">                do_deletion(REPLACE);</span><span class="DiffAdd">                                                                                                                                                                       </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">              q = q-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                                  </span>
<span class="DiffAdd">            }</span><span class="DiffAdd">                                                                                                                                                                                               </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">        </span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Move cursor to original position</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                </span>
<span class="DiffAdd">        do_first_line();</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">                    </span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(j = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; j &lt; y_orig; j++){                                                                                                                                                            </span>
<span class="DiffAdd">                        do_down_void();</span><span class="DiffAdd">                                                                                                                                                                     </span>
<span class="DiffAdd">                    }</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd">                    </span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(i = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; i &lt; x_orig; i++){                                                                                                                                                            </span>
<span class="DiffAdd">                        do_right();</span><span class="DiffAdd">                                                                                                                                                                         </span>
<span class="DiffAdd">                    }</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd">                    </span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(i = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; i &lt; check_ycor_mcandcc(p, x_orig, y_orig); i++){                                                                                                                             </span>
<span class="DiffAdd">                        do_left();</span><span class="DiffAdd">                                                                                                                                                                          </span>
<span class="DiffAdd">                    }</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                                             </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Add cursor position in a sorted way</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                     </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> addposition(mcarray *p, </span><span class="Type DiffAdd">size_t</span><span class="DiffAdd"> x, </span><span class="Type DiffAdd">ssize_t</span><span class="DiffAdd"> y){                                                                                                                                                          </span>
<span class="DiffAdd">	mcpositions *q;</span><span class="DiffAdd">                                                                                                                                                                                     </span>
<span class="DiffAdd">        mcpositions *r = p-&gt;head;</span><span class="DiffAdd">                                                                                                                                                                           </span>
<span class="DiffAdd">        mcpositions *r_f;</span><span class="DiffAdd">                                                                                                                                                                                   </span>
<span class="DiffAdd">	q = (mcpositions*)malloc(</span><span class="Statement DiffAdd">sizeof</span><span class="DiffAdd">(mcpositions));                                                                                                                                                      </span>
<span class="DiffAdd">	q-&gt;xcor = x;</span><span class="DiffAdd">                                                                                                                                                                                        </span>
<span class="DiffAdd">	q-&gt;ycor = y;</span><span class="DiffAdd">                                                                                                                                                                                        </span>
<span class="DiffAdd">        q-&gt;x_shift = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                     </span>
<span class="DiffAdd">	q-&gt;next = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                                     </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(p-&gt;head == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd"> &amp;&amp; p-&gt;tail == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">){                                                                                                                                                             </span>
<span class="DiffAdd">		p-&gt;head = q;</span><span class="DiffAdd">                                                                                                                                                                                </span>
<span class="DiffAdd">		p-&gt;tail = q;</span><span class="DiffAdd">                                                                                                                                                                                </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                                     </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(r &amp;&amp; (distance_origin(q) &gt; distance_origin(r))){                                                                                                                                              </span>
<span class="DiffAdd">            r_f = r;</span><span class="DiffAdd">                                                                                                                                                                                        </span>
<span class="DiffAdd">            r = r-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">        } </span><span class="DiffAdd">                                                                                                                                                                                                  </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(!r){                                                                                                                                                                                             </span>
<span class="DiffAdd">            p-&gt;tail-&gt;next = q;</span><span class="DiffAdd">                                                                                                                                                                              </span>
<span class="DiffAdd">            p-&gt;tail = q;</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                                         </span>
<span class="DiffAdd">        }</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">else</span><span class="DiffAdd"> </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(r == p-&gt;head){                                                                                                                                                                              </span>
<span class="DiffAdd">            q-&gt;next = p-&gt;head;</span><span class="DiffAdd">                                                                                                                                                                              </span>
<span class="DiffAdd">            p-&gt;head = q;</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">        }</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">else</span><span class="DiffAdd"> {                                                                                                                                                                                              </span>
<span class="DiffAdd">            r_f-&gt;next = q;</span><span class="DiffAdd">                                                                                                                                                                                  </span>
<span class="DiffAdd">            q-&gt;next = r;</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">        }</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> freemcarray(mcarray *p){                                                                                                                                                                               </span>
<span class="DiffAdd">	mcpositions *q = p-&gt;head;</span><span class="DiffAdd">                                                                                                                                                                           </span>
<span class="DiffAdd">	mcpositions *qtrail = q;</span><span class="DiffAdd">                                                                                                                                                                            </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(q){                                                                                                                                                                                           </span>
<span class="DiffAdd">		q = q-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                                </span>
<span class="DiffAdd">		free(qtrail);</span><span class="DiffAdd">                                                                                                                                                                               </span>
<span class="DiffAdd">		qtrail = q;</span><span class="DiffAdd">                                                                                                                                                                                 </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                                             </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Will return number of cursors placed in that line before the current cursor position</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                    </span>
<span class="Type DiffAdd">int</span><span class="DiffAdd"> check_ycor_mcandcc(mcarray *p, </span><span class="Type DiffAdd">size_t</span><span class="DiffAdd"> x_orig, </span><span class="Type DiffAdd">ssize_t</span><span class="DiffAdd"> y_orig){                                                                                                                                          </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> i, j;                                                                                                                                                                                               </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> nofc = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                           </span>
<span class="DiffAdd">    mcpositions *q = p-&gt;head;</span><span class="DiffAdd">                                                                                                                                                                               </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(q != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">){                                                                                                                                                                                       </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">((q-&gt;ycor == y_orig) &amp;&amp; (q-&gt;xcor &lt; x_orig)) nofc++;                                                                                                                                               </span>
<span class="DiffAdd">        q = q-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                                        </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> nofc;                                                                                                                                                                                            </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Increments xcors of all cursors in front the the current </span><span class="DiffAdd">                                                                                                                                                 </span>
<span class="Comment DiffAdd">    cursor in the same line by 1</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                          </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> increment_xcor_f_sl(mcarray *p, </span><span class="Type DiffAdd">ssize_t</span><span class="DiffAdd"> yco, </span><span class="Type DiffAdd">size_t</span><span class="DiffAdd"> xco){                                                                                                                                              </span>
<span class="DiffAdd">    mcpositions *q = p-&gt;head;</span><span class="DiffAdd">                                                                                                                                                                               </span>
<span class="DiffAdd">     </span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(q != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">){                                                                                                                                                                                      </span>
<span class="DiffAdd">         </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(q-&gt;ycor == yco)                                                                                                                                                                                 </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(q-&gt;xcor &gt; xco + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">) q-&gt;xcor++;                                                                                                                                                                </span>
<span class="DiffAdd">        q = q-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                                        </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                                                 </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> printoptocursors(mcarray *p, </span><span class="Type DiffAdd">size_t</span><span class="DiffAdd"> kbinput_len, </span><span class="Type DiffAdd">char</span><span class="DiffAdd">* output){                                                                                                                                        </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">size_t</span><span class="DiffAdd"> x;                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">ssize_t</span><span class="DiffAdd"> y;                                                                                                                                                                                          </span>
<span class="DiffAdd">        </span><span class="Type DiffAdd">size_t</span><span class="DiffAdd"> x_orig = openfile-&gt;current_x;                                                                                                                                                                </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">ssize_t</span><span class="DiffAdd"> y_orig = openfile-&gt;current_y;                                                                                                                                                               </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> i, j;                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> le;                                                                                                                                                                                             </span>
<span class="DiffAdd">        </span><span class="Type DiffAdd">void</span><span class="DiffAdd"> *opts = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                                  </span>
<span class="DiffAdd">        </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> c_at_lastline = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                              </span>
<span class="DiffAdd">	mcpositions *q = p-&gt;head;</span><span class="DiffAdd">                                                                                                                                                                           </span>
<span class="DiffAdd">	linestruct *f = openfile-&gt;fileage;</span><span class="DiffAdd">                                                                                                                                                                  </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">        increment_xcor_f_sl(p, y_orig, x_orig);</span><span class="DiffAdd">                                                                                                                                                             </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(q != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">){                                                                                                                                                                                   </span>
<span class="DiffAdd">            </span><span class="DiffAdd">                                                                                                                                                                                                </span>
<span class="DiffAdd">		do_first_line();</span><span class="DiffAdd">                                                                                                                                                                            </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">		x = q-&gt;xcor++;</span><span class="DiffAdd">                                                                                                                                                                              </span>
<span class="DiffAdd">                q-&gt;x_shift++;</span><span class="DiffAdd">                                                                                                                                                                               </span>
<span class="DiffAdd">		y = q-&gt;ycor;</span><span class="DiffAdd">                                                                                                                                                                                </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">                    </span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(j = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; j &lt; y; j++){                                                                                                                                                                 </span>
<span class="DiffAdd">                        do_down_void();</span><span class="DiffAdd">                                                                                                                                                                     </span>
<span class="DiffAdd">                    }</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd">                </span><span class="DiffAdd">                                                                                                                                                                                            </span>
<span class="DiffAdd">                    </span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(i = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; i &lt; x; i++){                                                                                                                                                                 </span>
<span class="DiffAdd">                        do_right();</span><span class="DiffAdd">                                                                                                                                                                         </span>
<span class="DiffAdd">                    }</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd">                </span><span class="DiffAdd">                                                                                                                                                                                            </span>
<span class="DiffAdd">                increment_xcor_f_sl(p, y, x);</span><span class="DiffAdd">                                                                                                                                                               </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">		do_output(output, kbinput_len, FALSE);</span><span class="DiffAdd">                                                                                                                                                      </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">                </span><span class="DiffAdd">                                                                                                                                                                                            </span>
<span class="DiffAdd">              q = q-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                                  </span>
<span class="DiffAdd">            }</span><span class="DiffAdd">                                                                                                                                                                                               </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">        </span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Move cursor to original position</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                </span>
<span class="DiffAdd">        do_first_line();</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">                    </span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(j = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; j &lt; y_orig; j++){                                                                                                                                                            </span>
<span class="DiffAdd">                        do_down_void();</span><span class="DiffAdd">                                                                                                                                                                     </span>
<span class="DiffAdd">                    }</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd">                    </span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(i = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; i &lt; x_orig; i++){                                                                                                                                                            </span>
<span class="DiffAdd">                        do_right();</span><span class="DiffAdd">                                                                                                                                                                         </span>
<span class="DiffAdd">                    }</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd">                    </span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(i = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; i &lt; check_ycor_mcandcc(p, x_orig, y_orig); i++){                                                                                                                             </span>
<span class="DiffAdd">                        do_right();</span><span class="DiffAdd">                                                                                                                                                                         </span>
<span class="DiffAdd">                    }</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                                             </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">mcarray mcarr;</span><span class="DiffAdd">                                                                                                                                                                                              </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Multiple cursors till here</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                              </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Dictionary from here</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">tree tr;</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> init(tree *t) {                                                                                                                                                                                        </span>
<span class="DiffAdd">	*t = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                                          </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="PreProc DiffAdd">#define LEFT </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">                                                                                                                                                                                              </span>
<span class="PreProc DiffAdd">#define RIGHT </span><span class="Constant DiffAdd">2</span><span class="DiffAdd">                                                                                                                                                                                             </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> insert(tree *t, </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *str) {                                                                                                                                                                           </span>
<span class="DiffAdd">	node *p, *q, *tmp;</span><span class="DiffAdd">                                                                                                                                                                                  </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> direction = LEFT;                                                                                                                                                                               </span>
<span class="DiffAdd">	p = *t;</span><span class="DiffAdd">                                                                                                                                                                                             </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(p) {                                                                                                                                                                                          </span>
<span class="DiffAdd">		q = p;</span><span class="DiffAdd">                                                                                                                                                                                      </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(str[</span><span class="Constant DiffAdd">0</span><span class="DiffAdd">] &lt;= p-&gt;str[</span><span class="Constant DiffAdd">0</span><span class="DiffAdd">]) {                                                                                                                                                                   </span>
<span class="DiffAdd">			p = p-&gt;left;</span><span class="DiffAdd">                                                                                                                                                                        </span>
<span class="DiffAdd">			direction = LEFT;</span><span class="DiffAdd">                                                                                                                                                                   </span>
<span class="DiffAdd">		}</span><span class="DiffAdd">                                                                                                                                                                                           </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">else</span><span class="DiffAdd"> {                                                                                                                                                                                      </span>
<span class="DiffAdd">			p = p-&gt;right;</span><span class="DiffAdd">                                                                                                                                                                       </span>
<span class="DiffAdd">			direction = RIGHT;</span><span class="DiffAdd">                                                                                                                                                                  </span>
<span class="DiffAdd">		}</span><span class="DiffAdd">                                                                                                                                                                                           </span>
<span class="DiffAdd">	}	</span><span class="DiffAdd">                                                                                                                                                                                            </span>
<span class="DiffAdd">	</span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> assert: p == NULL </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                             </span>
<span class="DiffAdd">	</span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> todo: create a new node, insert data in new node; </span><span class="DiffAdd">                                                                                                                                               </span>
<span class="Comment DiffAdd">         * and link the new node to q </span><span class="DiffAdd">                                                                                                                                                                      </span>
<span class="Comment DiffAdd">         </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                                                 </span>
<span class="DiffAdd">	tmp = (node *)malloc(</span><span class="Statement DiffAdd">sizeof</span><span class="DiffAdd">(node));                                                                                                                                                                 </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(!tmp)                                                                                                                                                                                            </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                                     </span>
<span class="DiffAdd">	tmp-&gt;str = (</span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *)malloc(strlen(str) + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">);                                                                                                                                                         </span>
<span class="DiffAdd">	strcpy(tmp-&gt;str, str);</span><span class="DiffAdd">                                                                                                                                                                              </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	tmp-&gt;left = tmp-&gt;right = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                      </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(*t == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">) {                                                                                                                                                                                    </span>
<span class="DiffAdd">		*t = tmp;</span><span class="DiffAdd">                                                                                                                                                                                   </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                                     </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(direction == LEFT)                                                                                                                                                                               </span>
<span class="DiffAdd">		q-&gt;left = tmp;</span><span class="DiffAdd">                                                                                                                                                                              </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">else</span><span class="DiffAdd">                                                                                                                                                                                                </span>
<span class="DiffAdd">		q-&gt;right = tmp;	</span><span class="DiffAdd">                                                                                                                                                                            </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="PreProc DiffAdd">#define MAXH(a, b) ((a) &gt; (b) ? (a) : (b))</span><span class="DiffAdd">                                                                                                                                                                  </span>
<span class="Type DiffAdd">int</span><span class="DiffAdd"> height(tree *t) {                                                                                                                                                                                       </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> x, y;                                                                                                                                                                                           </span>
<span class="DiffAdd">	node *p = *t;</span><span class="DiffAdd">                                                                                                                                                                                       </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(p == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">)                                                                                                                                                                                       </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> -</span><span class="Constant DiffAdd">1</span><span class="DiffAdd">;                                                                                                                                                                                  </span>
<span class="DiffAdd">	x = height(&amp;p-&gt;left);</span><span class="DiffAdd">                                                                                                                                                                               </span>
<span class="DiffAdd">	y = height(&amp;p-&gt;right);</span><span class="DiffAdd">                                                                                                                                                                              </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">1</span><span class="DiffAdd"> + MAXH(x, y);                                                                                                                                                                              </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> s_init(s_list *l){                                                                                                                                                                                     </span>
<span class="DiffAdd">	l-&gt;head = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                                     </span>
<span class="DiffAdd">	l-&gt;tail = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                                     </span>
<span class="DiffAdd">	l-&gt;length = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                      </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> s_append(s_list *l, </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *str){                                                                                                                                                                        </span>
<span class="DiffAdd">	s_node *temp = (s_node*)malloc(</span><span class="Statement DiffAdd">sizeof</span><span class="DiffAdd">(s_node));                                                                                                                                                     </span>
<span class="DiffAdd">	temp-&gt;word = (</span><span class="Type DiffAdd">char</span><span class="DiffAdd">*)malloc(</span><span class="Statement DiffAdd">sizeof</span><span class="DiffAdd">(str) + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">);                                                                                                                                                        </span>
<span class="DiffAdd">	strcpy(temp-&gt;word, str);</span><span class="DiffAdd">                                                                                                                                                                            </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(l-&gt;head == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd"> &amp;&amp; l-&gt;tail == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">){                                                                                                                                                             </span>
<span class="DiffAdd">		l-&gt;tail = temp;</span><span class="DiffAdd">                                                                                                                                                                             </span>
<span class="DiffAdd">		l-&gt;head = temp;</span><span class="DiffAdd">                                                                                                                                                                             </span>
<span class="DiffAdd">		l-&gt;head-&gt;next = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                       </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                                     </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">else</span><span class="DiffAdd"> {                                                                                                                                                                                              </span>
<span class="DiffAdd">		l-&gt;tail-&gt;next = temp;</span><span class="DiffAdd">                                                                                                                                                                       </span>
<span class="DiffAdd">		temp-&gt;next = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                          </span>
<span class="DiffAdd">		l-&gt;tail = temp;</span><span class="DiffAdd">                                                                                                                                                                             </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                                             </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">int</span><span class="DiffAdd"> if_in_ml(s_list *l, </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *str){                                                                                                                                                                         </span>
<span class="DiffAdd">	s_node *p = l-&gt;head;</span><span class="DiffAdd">                                                                                                                                                                                </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(p){                                                                                                                                                                                           </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(strcmp(str, p-&gt;word) == </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">;                                                                                                                                                     </span>
<span class="DiffAdd">		p = p-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                                </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                           </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> free_s_list(s_list *l){                                                                                                                                                                                </span>
<span class="DiffAdd">	s_node *p = l-&gt;head;</span><span class="DiffAdd">                                                                                                                                                                                </span>
<span class="DiffAdd">	s_node *q = p;</span><span class="DiffAdd">                                                                                                                                                                                      </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(p){                                                                                                                                                                                           </span>
<span class="DiffAdd">		p = p-&gt;next;</span><span class="DiffAdd">                                                                                                                                                                                </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(q) free(q-&gt;word);                                                                                                                                                                        </span>
<span class="DiffAdd">		q = p;</span><span class="DiffAdd">                                                                                                                                                                                      </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	s_init(l);</span><span class="DiffAdd">                                                                                                                                                                                          </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                                             </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">// 1 abhijeet 1 kale 1 parag 1 include 1 printf   6 p 6 p 6 i 6 v 6 v 6 g</span><span class="DiffAdd">                                                                                                                                   </span>
<span class="Type DiffAdd">int</span><span class="DiffAdd"> count(tree t) {                                                                                                                                                                                         </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(t == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">)                                                                                                                                                                                       </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                   </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">1</span><span class="DiffAdd"> + count(t-&gt;left) + count(t-&gt;right);	                                                                                                                                                    </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">int</span><span class="DiffAdd"> partial_match(</span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *this, </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *that){                                                                                                                                                                  </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> i = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                          </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(this == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">;                                                                                                                                                                          </span>
<span class="DiffAdd"> 	</span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(this[i] != </span><span class="Special DiffAdd">'\0'</span><span class="DiffAdd"> &amp;&amp; that[i] != </span><span class="Special DiffAdd">'\0'</span><span class="DiffAdd">){                                                                                                                                                          </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(this[i] != that[i]) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                            </span>
<span class="DiffAdd">		i++;</span><span class="DiffAdd">                                                                                                                                                                                        </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">;                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Searches in the tree</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">s_list has to be initialised before</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                     </span>
<span class="DiffAdd">tree le, ri;</span><span class="DiffAdd">                                                                                                                                                                                                </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">tree search(tree t, </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *str, s_list *l) {                                                                                                                                                                 </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(t){                                                                                                                                                                                           </span>
<span class="DiffAdd">		</span><span class="Comment DiffAdd">//printf(&quot;While start\n&quot;);</span><span class="DiffAdd">                                                                                                                                                                  </span>
<span class="DiffAdd">		</span><span class="Comment DiffAdd">//if(t) printf(&quot;Checking %s\n&quot;, t-&gt;str);</span><span class="DiffAdd">                                                                                                                                                    </span>
<span class="DiffAdd">		</span><span class="DiffAdd">                                                                                                                                                                                            </span>
<span class="DiffAdd">		</span><span class="Comment DiffAdd">//if(t) printf(&quot;Is t-&gt;str in mlist? %d\n&quot;, if_in_ml(l, t-&gt;str));</span><span class="DiffAdd">                                                                                                                            </span>
<span class="DiffAdd">		</span><span class="DiffAdd">                                                                                                                                                                                            </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">((partial_match(str, t-&gt;str) == </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">) &amp;&amp; (if_in_ml(l, t-&gt;str) == </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">)){                                                                                                                        </span>
<span class="DiffAdd">			</span><span class="Comment DiffAdd">//printf(&quot;Appending %s\n&quot;, t-&gt;str); </span><span class="DiffAdd">                                                                                                                                                </span>
<span class="DiffAdd">			s_append(l, t-&gt;str);</span><span class="DiffAdd">                                                                                                                                                                </span>
<span class="DiffAdd">			</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(str == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">){                                                                                                                                                                    </span>
<span class="DiffAdd">				le = search(t-&gt;left, </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">, l);                                                                                                                                              </span>
<span class="DiffAdd">				ri = search(t-&gt;right, </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">, l);                                                                                                                                             </span>
<span class="DiffAdd">			}</span><span class="DiffAdd">                                                                                                                                                                                   </span>
<span class="DiffAdd">			</span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> t;                                                                                                                                                                           </span>
<span class="DiffAdd">		}</span><span class="DiffAdd">                                                                                                                                                                                           </span>
<span class="DiffAdd">		</span><span class="DiffAdd">                                                                                                                                                                                            </span>
<span class="DiffAdd">		</span><span class="Comment DiffAdd">//printf(&quot;Partial matching done\n&quot;);</span><span class="DiffAdd">                                                                                                                                                        </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(str == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                </span>
<span class="DiffAdd">			</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(str[</span><span class="Constant DiffAdd">0</span><span class="DiffAdd">] &lt;= t-&gt;str[</span><span class="Constant DiffAdd">0</span><span class="DiffAdd">]) t = t-&gt;left;                                                                                                                                                        </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">else</span><span class="DiffAdd"> t = t-&gt;right;                                                                                                                                                                          </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Comment DiffAdd">//printf(&quot;End of while loop\n&quot;);</span><span class="DiffAdd">                                                                                                                                                                    </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                                        </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">/////////////////////////////////////////////////////////////////////</span><span class="DiffAdd">                                                                                                                                       </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Requires initialised tree</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                               </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> add_from_file(tree *t, </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *fname){                                                                                                                                                                   </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">FILE</span><span class="DiffAdd"> *fp;                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">char</span><span class="DiffAdd"> buf[</span><span class="Constant DiffAdd">64</span><span class="DiffAdd">];                                                                                                                                                                                       </span>
<span class="DiffAdd">	fp = fopen(fname, </span><span class="Constant DiffAdd">&quot;r&quot;</span><span class="DiffAdd">);                                                                                                                                                                             </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(fp == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd">;                                                                                                                                                                      </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(fscanf(fp, </span><span class="Constant DiffAdd">&quot;</span><span class="Special DiffAdd">%s</span><span class="Constant DiffAdd">&quot;</span><span class="DiffAdd">, buf) != -</span><span class="Constant DiffAdd">1</span><span class="DiffAdd">) insert(t, buf);                                                                                                                                                  </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">int</span><span class="DiffAdd"> power(</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> x, </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> y){                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> i, n;                                                                                                                                                                                           </span>
<span class="DiffAdd">	n = x;</span><span class="DiffAdd">                                                                                                                                                                                              </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(i = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; i &lt; y - </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">; i++) n = n * x;                                                                                                                                                               </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> n;                                                                                                                                                                                           </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">void</span><span class="DiffAdd"> free_tree(tree *t){                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	node *traveller = *t;</span><span class="DiffAdd">                                                                                                                                                                               </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> i, j, n, k;                                                                                                                                                                                     </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> *a;                                                                                                                                                                                             </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(i = </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">; i &lt;= height(t); i++){                                                                                                                                                                    </span>
<span class="DiffAdd">		a = (</span><span class="Type DiffAdd">int</span><span class="DiffAdd">*)calloc(i, </span><span class="Statement DiffAdd">sizeof</span><span class="DiffAdd">(</span><span class="Type DiffAdd">int</span><span class="DiffAdd">));                                                                                                                                                           </span>
<span class="DiffAdd">		traveller = *t;</span><span class="DiffAdd">                                                                                                                                                                             </span>
<span class="DiffAdd">		</span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(j = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; j &lt; power(</span><span class="Constant DiffAdd">2</span><span class="DiffAdd">, i); j++){                                                                                                                                                           </span>
<span class="DiffAdd">			traveller = *t;</span><span class="DiffAdd">                                                                                                                                                                     </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">			n = j;</span><span class="DiffAdd">                                                                                                                                                                              </span>
<span class="DiffAdd">			k = i - </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">;                                                                                                                                                                          </span>
<span class="DiffAdd">			</span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(n != </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">){                                                                                                                                                                      </span>
<span class="DiffAdd">				</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(n % </span><span class="Constant DiffAdd">2</span><span class="DiffAdd"> == </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">) a[k] = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                    </span>
<span class="DiffAdd">				</span><span class="Statement DiffAdd">else</span><span class="DiffAdd"> </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(n % </span><span class="Constant DiffAdd">2</span><span class="DiffAdd"> == </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">) a[k] = </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">;                                                                                                                                               </span>
<span class="DiffAdd">				n = n / </span><span class="Constant DiffAdd">2</span><span class="DiffAdd">;                                                                                                                                                                  </span>
<span class="DiffAdd">				k--;</span><span class="DiffAdd">                                                                                                                                                                        </span>
<span class="DiffAdd">			}</span><span class="DiffAdd">                                                                                                                                                                                   </span>
<span class="DiffAdd">						</span><span class="DiffAdd">                                                                                                                                                            </span>
<span class="DiffAdd">			</span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(k = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">; k &lt; i; k++){                                                                                                                                                             </span>
<span class="DiffAdd">				</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(a[k] == </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">){                                                                                                                                                              </span>
<span class="DiffAdd">					</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(traveller-&gt;left != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">) traveller = traveller-&gt;left;                                                                                                            </span>
<span class="DiffAdd">					</span><span class="Statement DiffAdd">else</span><span class="DiffAdd">{                                                                                                                                                               </span>
<span class="DiffAdd">						traveller = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                           </span>
<span class="DiffAdd">						</span><span class="Statement DiffAdd">break</span><span class="DiffAdd">;                                                                                                                                                      </span>
<span class="DiffAdd">					}</span><span class="DiffAdd">                                                                                                                                                                   </span>
<span class="DiffAdd">				}</span><span class="DiffAdd">                                                                                                                                                                           </span>
<span class="DiffAdd">				</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(a[k] == </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">){                                                                                                                                                              </span>
<span class="DiffAdd">					</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(traveller-&gt;right != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">) traveller = traveller-&gt;right;                                                                                                          </span>
<span class="DiffAdd">					</span><span class="Statement DiffAdd">else</span><span class="DiffAdd">{                                                                                                                                                               </span>
<span class="DiffAdd">						traveller = </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                           </span>
<span class="DiffAdd">						</span><span class="Statement DiffAdd">break</span><span class="DiffAdd">;                                                                                                                                                      </span>
<span class="DiffAdd">					}</span><span class="DiffAdd">                                                                                                                                                                   </span>
<span class="DiffAdd">				}</span><span class="DiffAdd">                                                                                                                                                                           </span>
<span class="DiffAdd">				a[k] = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                   </span>
<span class="DiffAdd">			}</span><span class="DiffAdd">                                                                                                                                                                                   </span>
<span class="DiffAdd">			</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">			</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(traveller != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">) free(traveller);                                                                                                                                              </span>
<span class="DiffAdd">			</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">		}</span><span class="DiffAdd">                                                                                                                                                                                           </span>
<span class="DiffAdd">		free(a);</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">char</span><span class="DiffAdd">* fetch_str(</span><span class="Type DiffAdd">void</span><span class="DiffAdd">){                                                                                                                                                                                      </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> i = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">, j = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">, k = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> x = openfile-&gt;current_x;                                                                                                                                                                            </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *str;                                                                                                                                                                                              </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *a = openfile-&gt;current-&gt;data;                                                                                                                                                                      </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> f = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                              </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> ibflag = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                         </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> tp;                                                                                                                                                                                                 </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> cp;                                                                                                                                                                                                 </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    tp = typepos();</span><span class="DiffAdd">                                                                                                                                                                                         </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(tp == </span><span class="Constant DiffAdd">3</span><span class="DiffAdd"> || tp == </span><span class="Constant DiffAdd">4</span><span class="DiffAdd"> || tp == </span><span class="Constant DiffAdd">5</span><span class="DiffAdd">) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                          </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    f = x;</span><span class="DiffAdd">                                                                                                                                                                                                  </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(tp == </span><span class="Constant DiffAdd">1</span><span class="DiffAdd"> || tp == </span><span class="Constant DiffAdd">2</span><span class="DiffAdd">) f--;                                                                                                                                                                             </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(a[f] != </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd"> &amp;&amp; x != </span><span class="Constant DiffAdd">0</span><span class="DiffAdd"> &amp;&amp; f &gt;= </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">){                                                                                                                                                                 </span>
<span class="DiffAdd">        f--;</span><span class="DiffAdd">                                                                                                                                                                                                </span>
<span class="DiffAdd">        i++;</span><span class="DiffAdd">                                                                                                                                                                                                </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    cp = f;</span><span class="DiffAdd">                                                                                                                                                                                                 </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(tp == </span><span class="Constant DiffAdd">6</span><span class="DiffAdd"> || tp == </span><span class="Constant DiffAdd">7</span><span class="DiffAdd">){                                                                                                                                                                                 </span>
<span class="DiffAdd">        f = x + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">;                                                                                                                                                                                          </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">while</span><span class="DiffAdd">(a[f] != </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd"> &amp;&amp; x != </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">){                                                                                                                                                                       </span>
<span class="DiffAdd">            f++;</span><span class="DiffAdd">                                                                                                                                                                                            </span>
<span class="DiffAdd">            i++;</span><span class="DiffAdd">                                                                                                                                                                                            </span>
<span class="DiffAdd">        }</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">         </span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">    str = (</span><span class="Type DiffAdd">char</span><span class="DiffAdd">*)malloc(i + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">);                                                                                                                                                                             </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">for</span><span class="DiffAdd">(j = cp + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">; j &lt; cp + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd"> + i; j++){                                                                                                                                                                   </span>
<span class="DiffAdd">        str[k++] = a[j];</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd">        str[k] = </span><span class="Special DiffAdd">'\0'</span><span class="DiffAdd">;                                                                                                                                                                                      </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(k == </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">;                                                                                                                                                                             </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> str;                                                                                                                                                                                             </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type DiffAdd">int</span><span class="DiffAdd"> typepos(){                                                                                                                                                                                              </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">int</span><span class="DiffAdd"> x = openfile-&gt;current_x;                                                                                                                                                                        </span>
<span class="DiffAdd">	</span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *a = openfile-&gt;current-&gt;data;                                                                                                                                                                  </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">((a[x] == </span><span class="Special DiffAdd">'\00'</span><span class="DiffAdd">) &amp;&amp; (a[x - </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">] != </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd">) &amp;&amp; x != </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">;                                                                                                                                        </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(a[x] == </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd"> &amp;&amp; a[x - </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">] != </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd"> &amp;&amp; (a[x + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">] != </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd">) &amp;&amp; (a[x + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">] != </span><span class="Special DiffAdd">'\00'</span><span class="DiffAdd">) &amp;&amp; x != </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">2</span><span class="DiffAdd">;                                                                                                  </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">((a[x] == </span><span class="Special DiffAdd">'\00'</span><span class="DiffAdd">) &amp;&amp; (a[x - </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">] == </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd">)) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">3</span><span class="DiffAdd">;                                                                                                                                                  </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">((a[x] == </span><span class="Special DiffAdd">'\00'</span><span class="DiffAdd">) &amp;&amp; (x == </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">)) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">4</span><span class="DiffAdd">;                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">((a[x] != </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd">) &amp;&amp; (a[x] != </span><span class="Special DiffAdd">'\00'</span><span class="DiffAdd">) &amp;&amp; (a[x - </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">] != </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd">) &amp;&amp; (a[x - </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">] != </span><span class="Special DiffAdd">'\00'</span><span class="DiffAdd">)) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">6</span><span class="DiffAdd">;                                                                                                          </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">if</span><span class="DiffAdd">((a[x] != </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd">) &amp;&amp; (a[x] != </span><span class="Special DiffAdd">'\00'</span><span class="DiffAdd">) &amp;&amp; (a[x - </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">] == </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd">) &amp;&amp; (a[x + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">] != </span><span class="Constant DiffAdd">' '</span><span class="DiffAdd">) &amp;&amp; (a[x + </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">] != </span><span class="Special DiffAdd">'\00'</span><span class="DiffAdd">)) </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">7</span><span class="DiffAdd">;                                                                                     </span>
<span class="DiffAdd">	</span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">	</span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                           </span>
<span class="DiffAdd">}</span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">dictionaryTill here</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                                     </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Comment">/*</span><span class="Comment"> Create a new linestruct node.  Note that we do not set prevnode-&gt;next</span>
<span class="Comment"> * to the new line. </span><span class="Comment">*/</span>
linestruct *make_new_node(linestruct *prevnode)
{
    linestruct *newnode = (linestruct *)nmalloc(<span class="Statement">sizeof</span>(linestruct));

<span class="Folded">+--1503 lines: newnode-&gt;data = NULL;------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
}

<span class="Comment">/*</span><span class="Comment"> Read in a character, interpret it as a shortcut or toggle if</span>
<span class="Comment"> * necessary, and return it.</span>
<span class="Comment"> * If allow_funcs is FALSE, don't actually run any functions associated</span>
<span class="Comment"> * with shortcut keys. </span><span class="Comment">*/</span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type">int</span> do_input(<span class="Type">bool</span> allow_funcs)
{
<span class="DiffAdd">    </span><span class="Type DiffAdd">FILE</span><span class="DiffAdd"> *fp;                                                                                                                                                                                               </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">static</span><span class="DiffAdd"> </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> nofmc = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                   </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> mcmsg[</span><span class="Constant DiffAdd">40</span><span class="DiffAdd">];                                                                                                                                                                                         </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">static</span><span class="DiffAdd"> </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> b_space = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                 </span>
    <span class="Type">int</span> input;
	<span class="Comment">/*</span><span class="Comment"> The character we read in. </span><span class="Comment">*/</span>
    <span class="Type">static</span> <span class="Type">int</span> *kbinput = <span class="Constant">NULL</span>;
	<span class="Comment">/*</span><span class="Comment"> The input buffer. </span><span class="Comment">*/</span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
    <span class="Type">static</span> <span class="Type">size_t</span> kbinput_len = <span class="Constant">0</span>;
	<span class="Comment">/*</span><span class="Comment"> The length of the input buffer. </span><span class="Comment">*/</span>
    <span class="Type">bool</span> preserve = FALSE;
	<span class="Comment">/*</span><span class="Comment"> Preserve the contents of the cutbuffer? </span><span class="Comment">*/</span>
    <span class="Type">const</span> sc *s;
    <span class="Type">bool</span> have_shortcut;
    <span class="Comment">/*</span><span class="Comment"> Read in a character. </span><span class="Comment">*/</span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">int</span><span class="DiffAdd"> i;                                                                                                                                                                                                  </span>
<span class="DiffAdd">    </span><span class="Type DiffAdd">char</span><span class="DiffAdd"> *buf;                                                                                                                                                                                              </span>
    input = get_kbinput(edit);

<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(input == </span><span class="Constant DiffAdd">337</span><span class="DiffAdd">){                                                                                                                                                                                       </span>
<span class="DiffAdd">		mcflag = </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">;                                                                                                                                                                                 </span>
<span class="DiffAdd">                nofmc++;</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">		addposition(&amp;mcarr, openfile-&gt;current_x, openfile-&gt;current_y);</span><span class="DiffAdd">                                                                                                                              </span>
<span class="DiffAdd">                sprintf(mcmsg, </span><span class="Constant DiffAdd">&quot;Marker no. </span><span class="Special DiffAdd">%d</span><span class="Constant DiffAdd"> recorded&quot;</span><span class="DiffAdd">, nofmc);                                                                                                                                            </span>
<span class="DiffAdd">		statusbar(_(mcmsg));</span><span class="DiffAdd">                                                                                                                                                                        </span>
<span class="DiffAdd">	    	beep();</span><span class="DiffAdd">                                                                                                                                                                                     </span>
<span class="DiffAdd">                </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> input;                                                                                                                                                                               </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(input == </span><span class="Constant DiffAdd">336</span><span class="DiffAdd">){                                                                                                                                                                                       </span>
<span class="DiffAdd">		mcflag = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                 </span>
<span class="DiffAdd">                nofmc = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                  </span>
<span class="DiffAdd">		freemcarray(&amp;mcarr);</span><span class="DiffAdd">                                                                                                                                                                        </span>
<span class="DiffAdd">                initmcarray(&amp;mcarr);</span><span class="DiffAdd">                                                                                                                                                                        </span>
<span class="DiffAdd">                b_space = </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">;                                                                                                                                                                                </span>
<span class="DiffAdd">		statusbar(_(</span><span class="Constant DiffAdd">&quot;Markers freed&quot;</span><span class="DiffAdd">));                                                                                                                                                              </span>
<span class="DiffAdd">	    	beep();</span><span class="DiffAdd">                                                                                                                                                                                     </span>
<span class="DiffAdd">                </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> input;                                                                                                                                                                               </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(input == </span><span class="Constant DiffAdd">402</span><span class="DiffAdd"> || input == </span><span class="Constant DiffAdd">393</span><span class="DiffAdd">){                                                                                                                                                                       </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(openfile-&gt;mark_set == FALSE){                                                                                                                                                                    </span>
<span class="DiffAdd">            do_mark();</span><span class="DiffAdd">                                                                                                                                                                                      </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(input == </span><span class="Constant DiffAdd">402</span><span class="DiffAdd">) input = </span><span class="Constant DiffAdd">6</span><span class="DiffAdd">;                                                                                                                                                                     </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(input == </span><span class="Constant DiffAdd">393</span><span class="DiffAdd">) input = </span><span class="Constant DiffAdd">2</span><span class="DiffAdd">;                                                                                                                                                                     </span>
<span class="DiffAdd">        }</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">else</span><span class="DiffAdd">{                                                                                                                                                                                               </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(input == </span><span class="Constant DiffAdd">402</span><span class="DiffAdd">) input = </span><span class="Constant DiffAdd">6</span><span class="DiffAdd">;                                                                                                                                                                     </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(input == </span><span class="Constant DiffAdd">393</span><span class="DiffAdd">) input = </span><span class="Constant DiffAdd">2</span><span class="DiffAdd">;                                                                                                                                                                     </span>
<span class="DiffAdd">        }</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(input == </span><span class="Constant DiffAdd">8</span><span class="DiffAdd">){                                                                                                                                                                                         </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(mcflag == </span><span class="Constant DiffAdd">1</span><span class="DiffAdd">){                                                                                                                                                                                    </span>
<span class="DiffAdd">            </span><span class="DiffAdd">                                                                                                                                                                                                </span>
<span class="DiffAdd">            do_backspace();</span><span class="DiffAdd">                                                                                                                                                                                 </span>
<span class="DiffAdd">            backspace_mc(&amp;mcarr);</span><span class="DiffAdd">                                                                                                                                                                           </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(b_space == </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">) backspace_mc(&amp;mcarr);                                                                                                                                                          </span>
<span class="DiffAdd">            b_space++;</span><span class="DiffAdd">                                                                                                                                                                                      </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">return</span><span class="DiffAdd"> input;                                                                                                                                                                                   </span>
<span class="DiffAdd">        }</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(input == </span><span class="Constant DiffAdd">0</span><span class="DiffAdd">){                                                                                                                                                                                         </span>
<span class="DiffAdd">        buf = fetch_str();</span><span class="DiffAdd">                                                                                                                                                                                  </span>
<span class="DiffAdd">                       </span><span class="Comment DiffAdd">//fprintf(fp, &quot;%s\n&quot;, buf);</span><span class="DiffAdd">                                                                                                                                                          </span>
<span class="DiffAdd">            </span><span class="Comment DiffAdd">//fclose(fp);</span><span class="DiffAdd">                                                                                                                                                                                   </span>
<span class="DiffAdd">            </span><span class="Statement DiffAdd">if</span><span class="DiffAdd"> (ISSET(TEMP_FILE)) {                                                                                                                                                                         </span>
<span class="DiffAdd">	    curs_set(</span><span class="Constant DiffAdd">0</span><span class="DiffAdd">);                                                                                                                                                                                    </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	    </span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> Warn that the current file has no name. </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                   </span>
<span class="DiffAdd">	    statusbar(_(</span><span class="Constant DiffAdd">&quot;No file name&quot;</span><span class="DiffAdd">));                                                                                                                                                                   </span>
<span class="DiffAdd">	    beep();</span><span class="DiffAdd">                                                                                                                                                                                         </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	    </span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd"> Ensure that we see the warning. </span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                           </span>
<span class="DiffAdd">	    doupdate();</span><span class="DiffAdd">                                                                                                                                                                                     </span>
<span class="DiffAdd">	    napms(</span><span class="Constant DiffAdd">2000</span><span class="DiffAdd">);                                                                                                                                                                                    </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">	    curs_set(</span><span class="Constant DiffAdd">1</span><span class="DiffAdd">);                                                                                                                                                                                    </span>
<span class="DiffAdd">	}</span><span class="DiffAdd">                                                                                                                                                                                                   </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">        i = do_dictionary_prompt(FALSE,</span><span class="DiffAdd">                                                                                                                                                                     </span>
<span class="DiffAdd">		_(</span><span class="Constant DiffAdd">&quot;Press the appropriate number, &quot;</span><span class="DiffAdd">), tr, buf);                                                                                                                                              </span>
<span class="DiffAdd">               </span><span class="Comment DiffAdd">//fprintf(fp, &quot;%s\n&quot;, buf);</span><span class="DiffAdd">                                                                                                                                                                  </span>
<span class="DiffAdd">            </span><span class="Comment DiffAdd">//fclose(fp);</span><span class="DiffAdd">                                                                                                                                                                                   </span>
<span class="DiffAdd">        </span><span class="DiffAdd">                                                                                                                                                                                                    </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(buf != </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">) do_left();                                                                                                                                                                          </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(i == </span><span class="Constant DiffAdd">1</span><span class="DiffAdd"> || i == </span><span class="Constant DiffAdd">2</span><span class="DiffAdd"> || i == </span><span class="Constant DiffAdd">6</span><span class="DiffAdd"> || i == </span><span class="Constant DiffAdd">7</span><span class="DiffAdd">) do_right();                                                                                                                                                </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(i == </span><span class="Constant DiffAdd">1</span><span class="DiffAdd"> || i == </span><span class="Constant DiffAdd">6</span><span class="DiffAdd">) input = </span><span class="Constant DiffAdd">32</span><span class="DiffAdd">;                                                                                                                                                                    </span>
<span class="DiffAdd">        </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(i == </span><span class="Constant DiffAdd">3</span><span class="DiffAdd"> || i == </span><span class="Constant DiffAdd">4</span><span class="DiffAdd">) input = get_kbinput(edit);                                                                                                                                                     </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">        blank_statusbar();</span><span class="DiffAdd">                                                                                                                                                                                  </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">    display_main_list();</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">    }</span><span class="DiffAdd">                                                                                                                                                                                                       </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd">    </span><span class="Comment DiffAdd">/*</span><span class="Comment DiffAdd">Input 0 till here</span><span class="Comment DiffAdd">*/</span><span class="DiffAdd">                                                                                                                                                                                   </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="PreProc">#ifndef NANO_TINY</span>
    <span class="Statement">if</span> (input == KEY_WINCH)
	<span class="Statement">return</span> KEY_WINCH;
<span class="PreProc">#endif</span>

<span class="PreProc">#ifndef DISABLE_MOUSE</span>
<span class="Folded">+--  9 lines: if (func_key &amp;&amp; input == KEY_MOUSE) {---------------------------------------------------------------------------------------------------------------------------------------------------------</span>
    }
<span class="PreProc">#endif</span>

    <span class="Comment">/*</span><span class="Comment"> Check for a shortcut in the main list. </span><span class="Comment">*/</span>
    s = get_shortcut(&amp;input);

<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
    <span class="Comment">/*</span><span class="Comment"> If we got a shortcut from the main list, or a &quot;universal&quot;</span>
<span class="Comment">     * edit window shortcut, set have_shortcut to TRUE. </span><span class="Comment">*/</span>
    have_shortcut = (s != <span class="Constant">NULL</span>);

<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
    <span class="Comment">/*</span><span class="Comment"> If we got a non-high-bit control key, a meta key sequence, or a</span>
<span class="Comment">     * function key, and it's not a shortcut or toggle, throw it out. </span><span class="Comment">*/</span>
    <span class="Statement">if</span> (!have_shortcut) {
	<span class="Statement">if</span> (is_ascii_cntrl_char(input) || meta_key || func_key) {
	    statusbar(_(<span class="Constant">&quot;Unknown Command&quot;</span>));
	    beep();
<span class="Folded">+-- 44 lines: meta_key = FALSE;-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
		<span class="Type">char</span> *output = charalloc(kbinput_len + <span class="Constant">1</span>);
		<span class="Type">size_t</span> i;

		<span class="Statement">for</span> (i = <span class="Constant">0</span>; i &lt; kbinput_len; i++)
		    output[i] = (<span class="Type">char</span>)kbinput[i];
		output[i] = <span class="Special">'\0'</span>;
<span class="DiffText">                </span><span class="DiffChange">                                                                                                                                                                                            </span>
<span class="DiffText">                </span><span class="Comment DiffText">/*</span><span class="Comment DiffText">Ithar hai Multiple cursors</span><span class="Comment DiffText">*/</span><span class="DiffChange">                                                                                                                                                              </span>
<span class="DiffText">                </span><span class="Statement DiffText">if</span><span class="DiffText">(mcflag == </span><span class="Constant DiffText">0</span><span class="DiffText">) do_output(output, kbinput_len, FALSE);</span><span class="DiffChange">                                                                                                                                      </span>
<span class="DiffAdd">                </span><span class="Statement DiffAdd">else</span><span class="DiffAdd">{                                                                                                                                                                                       </span>
<span class="DiffAdd">                    printoptocursors(&amp;mcarr, kbinput_len, output);</span><span class="DiffAdd">                                                                                                                                          </span>
<span class="DiffAdd">                    do_output(output, kbinput_len, FALSE);</span><span class="DiffAdd">                                                                                                                                                  </span>
<span class="DiffAdd">                }</span><span class="DiffAdd">                                                                                                                                                                                           </span>
		free(output);

		<span class="Comment">/*</span><span class="Comment"> Empty the input buffer. </span><span class="Comment">*/</span>
		kbinput_len = <span class="Constant">0</span>;
		free(kbinput);
		kbinput = <span class="Constant">NULL</span>;
<span class="Folded">+--295 lines: }---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
<span class="Type">void</span> do_output(<span class="Type">char</span> *output, <span class="Type">size_t</span> output_len, <span class="Type">bool</span> allow_cntrls)
{
    <span class="Type">size_t</span> current_len, i = <span class="Constant">0</span>;
<span class="PreProc">#ifndef NANO_TINY</span>
    <span class="Type">size_t</span> orig_lenpt = <span class="Constant">0</span>;
<span class="PreProc">#endif</span>
<span class="Comment DiffText">/*</span><span class="Comment DiffText"> Return the maximum width in bytes of a multibyte character. </span><span class="Comment DiffText">*/</span><span class="DiffChange">                                                                                                                                           </span>
    <span class="Type">char</span> *char_buf = charalloc(mb_cur_max());
    <span class="Type">int</span> char_buf_len;

    assert(openfile-&gt;current != <span class="Constant">NULL</span> &amp;&amp; openfile-&gt;current-&gt;data != <span class="Constant">NULL</span>);

    current_len = strlen(openfile-&gt;current-&gt;data);
<span class="Folded">+-- 60 lines: #ifndef NANO_TINY-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
		openfile-&gt;mark_begin_x)
	    openfile-&gt;mark_begin_x += char_buf_len;
<span class="PreProc">#endif</span>

	openfile-&gt;current_x += char_buf_len;

<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="PreProc">#ifndef NANO_TINY</span>
	update_undo(ADD);
<span class="PreProc">#endif</span>

<span class="PreProc">#ifndef DISABLE_WRAPPING</span>
	<span class="Comment">/*</span><span class="Comment"> If we're wrapping text, we need to call edit_refresh(). </span><span class="Comment">*/</span>
<span class="Folded">+-- 29 lines: if (!ISSET(NO_WRAP))--------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span>
	edit_refresh();
	edit_refresh_needed = FALSE;
    } <span class="Statement">else</span>
	update_line(openfile-&gt;current, openfile-&gt;current_x);
}

<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
<span class="Type">int</span> main(<span class="Type">int</span> argc, <span class="Type">char</span> **argv)
{
    <span class="Type">int</span> optchr;
    <span class="Type">ssize_t</span> startline = <span class="Constant">0</span>, startcol = <span class="Constant">0</span>;
<span class="DiffAdd">    </span><span class="Type DiffAdd">FILE</span><span class="DiffAdd"> *fp;                                                                                                                                                                                               </span>
<span class="DiffAdd"> </span><span class="DiffAdd">                                                                                                                                                                                                           </span>
	<span class="Comment">/*</span><span class="Comment"> Target line and column when specified on the command line. </span><span class="Comment">*/</span>
<span class="PreProc">#ifndef DISABLE_WRAPJUSTIFY</span>
    <span class="Type">bool</span> fill_used = FALSE;
	<span class="Comment">/*</span><span class="Comment"> Was the fill option used? </span><span class="Comment">*/</span>
<span class="PreProc">#endif</span>
    SET(USE_MOUSE);
<span class="DiffAdd">    initmcarray(&amp;mcarr);</span><span class="DiffAdd">                                                                                                                                                                                    </span>
<span class="DiffAdd">    init(&amp;tr);</span><span class="DiffAdd">                                                                                                                                                                                              </span>
<span class="DiffAdd">    fp = fopen(</span><span class="Constant DiffAdd">&quot;dictionary.txt&quot;</span><span class="DiffAdd">, </span><span class="Constant DiffAdd">&quot;r&quot;</span><span class="DiffAdd">);                                                                                                                                                                      </span>
<span class="DiffAdd">    </span><span class="Statement DiffAdd">if</span><span class="DiffAdd">(fp == </span><span class="Constant DiffAdd">NULL</span><span class="DiffAdd">) fp = fopen(</span><span class="Constant DiffAdd">&quot;dictionary.txt&quot;</span><span class="DiffAdd">, </span><span class="Constant DiffAdd">&quot;a&quot;</span><span class="DiffAdd">);                                                                                                                                                       </span>
<span class="DiffAdd">    add_from_file(&amp;tr, </span><span class="Constant DiffAdd">&quot;dictionary.txt&quot;</span><span class="DiffAdd">);                                                                                                                                                                   </span>
<span class="DiffAdd">    </span><span class="DiffAdd">                                                                                                                                                                                                        </span>
<span class="PreProc">#ifndef DISABLE_MULTIBUFFER</span>
    <span class="Type">bool</span> old_multibuffer;
	<span class="Comment">/*</span><span class="Comment"> The old value of the multibuffer option, restored after we</span>
<span class="Comment">	 * load all files on the command line. </span><span class="Comment">*/</span>
<span class="PreProc">#endif</span>
<span class="PreProc">#ifdef HAVE_GETOPT_LONG</span>
<span class="Folded">+--707 lines: const struct option long_options[] = {--------------------------------------------------------------------------------------------------------------------------------------------------------</span>
</pre>
</div></td>
</tr>
</table>
</body>
</html>
<!-- vim: set foldmethod=manual : -->

